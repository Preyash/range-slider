<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Input integer</title>
    <style>
      body {
        background: #dde1e7;
        color: #666666;
        margin: 30px;
        font-family: serif;
      }
    </style>
  </head>
  <body>
    <!-- <script src="index.js"></script> -->
    <script>
      let theme = `
          input {
              height: 100%;
              width: 200px;
              padding: 20px;
              font-size: 22px;
              outline: none;
              border: none;
              color: #595959;
              background: #dde1e7;
              border-radius: 25px;
              box-shadow: inset 2px 2px 5px #babecc,
                          inset -5px -5px 10px #ffffff73;
          }
          input:focus {
              outline: 2px solid #b8b8b8;
          }
      `;
      customElements.define(
        "input-integer",
        class extends HTMLElement {
          constructor() {
            super();

            let shadowEl = this.attachShadow({ mode: "closed" });
            let d = document;
            const sheet = new CSSStyleSheet();
            sheet.replaceSync(theme);

            let root = d.createElement("div");

            let inputLabel = d.createElement("label");
            inputLabel.innerText = "Enter age: ";

            // let birthYearLabel = d.createElement("label");
            // birthYearLabel.innerText = "Enter birth year: ";

            let input = d.createElement("input");
            input.type = "number";
            input.min = 1;
            input.max = 150;
            // let birthYear = d.createElement("input");

            root.append(inputLabel);
            root.append(d.createElement("br"));
            root.append(input);
            root.append(d.createElement("br"));
            // root.append(birthYearLabel);
            // root.append(d.createElement("br"));
            // root.append(birthYear);

            this.keyupHandle = (e) => {
              let val = Number(e.target.value);
              let valLen = val.toString().length;
              let minLen = input.min.toString().length;
              if (valLen == minLen && val < input.min) input.value = "";
              else if (val > input.max) input.value = input.max;
            };

            input.addEventListener("keyup", this.keyupHandle);
            // birthYear.addEventListener("keyup", this.keyupHandle);

            shadowEl.adoptedStyleSheets = [sheet];
            shadowEl.append(root);
          }
        }
      );
    </script>
    <input-integer></input-integer>
  </body>
</html>
